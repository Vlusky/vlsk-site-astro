---
import BaseLayout from '../../layouts/BaseLayout.astro'
import BlogThumbnail from '../../components/BlogThumbnail.astro'
const allPosts = await Astro.glob('../../pages/posts/*.md')
allPosts.reverse()
const tags = [...new Set(allPosts.map((post) => post.frontmatter.tags).flat())]
---

<BaseLayout pageTitle={"blog"} display="block" backgroundStyle="linear-gradient(156deg, rgba(36,0,0,1) 0%, rgba(121,9,58,1) 100%)">
    <h1>Blog posts</h1>
    <p>random bullshit for the whole family to enjoy</p>
    

    <h3 style="padding-bottom:0">available tags</h3>
    <div class="tags">
      {tags.map((tag) => (
        <a href={`/blog/${tag}`}><div class="tag">{tag}</div></a>
      ))}
    </div>

    <div>
      {allPosts.map((post) => <BlogThumbnail 
          title={post.frontmatter.title}
          description={post.frontmatter.description}
          url={post.url}
          thumbnail={post.frontmatter.thumbnail}
      ></BlogThumbnail>)}
    </div>

</BaseLayout>


<style>
  .tags {
    display: flex; 
    flex-wrap: wrap; 
    margin: 0 1rem;
    margin-bottom: 2rem;
    width: 100%;
  }

  .tag {
    margin: 0.25em;
    border: solid 2px #ffffff6b;
    padding: .5em 1em;
    font-size: 0.9rem;
    background-color: rgba(255, 255, 255, 0.253);
    cursor: pointer;
  }

  .tags > a > div {
    transition: all 0.2s ease;
  }


  .tags:has(div:hover) > a > div {
    filter: blur(2px);
  }

  .tags:has(div:hover) > a:hover > div {
    filter: blur(0);
    transform: scale(1.05);
    z-index: 1;
  }

  a {
    color: whitesmoke;
    background: none !important;
  }
</style>